!function(n,t){"use strict";function r(){var n=t(i);return e?void(module.exports=n):window.ruta=n}var e="undefined"==typeof window||null==window.navigator,i=e?global:window;return"function"==typeof define&&define.amd?define(r):r()}(this,function(n){"use strict";function t(){return null==O&&(O=new C(q)),O}var r,e,i=n.mask||("undefined"!=typeof Mask?Mask:null),u=!0,o=Array.prototype.slice;!function(){r=function(n,t){if(null==t)return n||{};if(null==n)return e(t);for(var r in t)n[r]=t[r];return n},e=Object.create||function(n){var t=function(){};return t.prototype=n,new t}}();var a;!function(){a=function(){var n=o.call(arguments);console.error.apply(console,["Ruta"].concat(n))}}();var s,l,c,f,h,v;!function(){function n(n){for(var t,r,e=n.trim().split(/\s+/),i=e.length,u=-1;++u<i;)if(r=e[u],0!==r.length&&(t=r[0],'"'===t||"'"===t))for(var o=u;i>u;u++)if(r=e[u],r[r.length-1]===t){var a=e.splice(o,u-o+1).join(" ").slice(1,-1);e.splice(o,0,a),i=e.length;break}return e}function t(n){for(var t,r,e,i=n.length,u=0,o={},a=[];i>u;u++)e=n[u],"-"!==e[0]?a.push(e):(t=e.replace(/^[\-]+/,""),i-1>u&&"-"!==n[u+1][0]?(r=n[u+1],u++):r=!0,o[t]=r);return{path:a,query:o}}s=function(n){for(var t=n.length,r=0,e=t-1;t>r&&"/"===n[r];r++);for(;e>r&&"/"===n[e];e--);return n.substring(r,e+1)},l=function(n){return n=s(n),""===n?[]:n.split("/")},c=function(n){return"/"+n.join("/")},f=function(r){"string"==typeof r&&(r=n(r));var e=t(r);return m(e)},h=function(n){var t=n.indexOf("?");if(-1===t)return null;var r=n.substring(t+1);return p(r,"&")},v=function(n,t){var r="string"!=typeof t?g(t,"&"):t,e=n.indexOf("?");return-1!==e&&(n=n.substring(0,e)),n+"?"+r}}();var p,g;!function(){function n(n,t,r){for(var e,i=t.split("."),u=i.length,o=-1;++o<u-1;)e=i[o],null==n[e]&&(n[e]={}),n=n[e];n[i[o]]=r}function t(n){try{return decodeURIComponent(n)}catch(t){return a("decode:URI malformed"),""}}function r(n){try{return encodeURIComponent(n)}catch(t){return a("encode:URI malformed"),""}}p=function(r,e){null==e&&(e="&");for(var i,u,o={},a=r.split(e),s=0,l=a.length;l>s;s++)i=a[s].split("="),u=null==i[1]?"":t(i[1]),n(o,i[0],u);return o},g=function(n,t){null==t&&(t="&");var e,i,u="";for(e in n)i=n[e],null!=i&&("boolean"==typeof i&&(i=null),u=u+(u?t:"")+e,i&&(u+="="+r(i)));return u}}();var d,w,y;!function(){d=function(n,t){return new RegExp(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t)},w=function(n){if("^"===n[0])return new RegExp(n);for(var t=n.split("|"),r=0,e=t.length;e>r;r++)t[r]="^"+t[r]+"$";return new RegExp(t.join("|"))},y=function(n){var t=n.indexOf("("),r=n.lastIndexOf(")");if(-1===t||-1===r)return a("Expected alias part with regexp",n),null;var e=n.substring(t+1,r);return{alias:n.substring(1,t),matcher:w(e)}}}();var m,b;!function(){m=function(n){var t=c(n.path);return null==n.query?t:t+"?"+g(n.query,"&")},b=function(n){var t=n.indexOf("?"),r=-1===t?n:n.substring(0,t);return{path:l(r),query:-1===t?null:p(n.substring(t+1),"&")}}}();var x;!function(){var n,t,r=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};!function(){function r(n,t){for(var r in n)if(t.test(r))return n[r]}function e(n){this.str=n}function i(n){this.str=n}n=function(n,t){var r=t.charCodeAt(0);switch(r){case 33:n.strict=!0,t=t.substring(1);break;case 94:n.strict=!1,t=t.substring(1);break;case 40:var u=1,o=t.length-1;return 41!==t.charCodeAt(t.length-1)&&(a("parser - expect group closing"),o++),void(n.match=new RegExp(t.substring(u,o)))}var s,l,c,f,h,v,p=t.split("/"),g=0,d=p.length,y=p[d-1];l=y.indexOf("?"),l>(1===d?-1:0)&&(s=y.substring(l+1),p[d-1]=y.substring(0,l));for(var m,b,x,C=!0,O=n.path=[];d>g;g++)if(c=p[g],""!==c)if(f=c.charCodeAt(0),v=c.charCodeAt(1),m=63===f,b=58===(m?v:f),h=0,m&&h++,b&&h++,0!==h&&(c=c.substring(h)),m||C||a("Strict part found after optional",t),"*"!==c){m&&(C=!1);var R=c.indexOf("(");if(b&&-1!==R){var o=c.length-1;")"!==c[o]&&(o+=1),x=new RegExp(w(c.substring(R+1,o))),c=c.substring(0,R)}m||b?b?O.push({alias:c,matcher:x,optional:m}):m&&O.push({matcher:new e(c),optional:m}):O.push(c)}else O.push({matcher:new i});if(s){var q=n.query={};p=s.split("&"),g=-1,d=p.length;for(var A,E,P,j;++g<d;)P=p[g],j=P.indexOf("="),-1!==j?(A=P.substring(0,j),E=P.substring(j+1),40===E.charCodeAt(0)&&(E=new RegExp(w(E))),q[A]=E):q[P]="";0===n.path.length&&(n.strict=!1)}},t=function(n,t){var e=t.indexOf("?"),i=-1===e?null:t.substring(e+1),u={path:t,params:null==i?{}:p(i,"&")};if(n.query)for(var o in n.query)if("?"===o[0]&&(o=o.substring(1)),":"===o[0]){var a=y(o),s=a.alias;u.params[s]=r(u.params,a.matcher)}if(-1!==e&&(t=t.substring(0,e)),null!=n.path)for(var c,f,h=l(t),v=n.path,g=v.length,d=h.length,w=0;d>w;w++)if(c=h[w],f=g>w?v[w]:null){if("string"==typeof f)continue;if(f.alias){u.params[f.alias]=c;continue}}return u},e.prototype={test:function(n){return n===this.str}},i.prototype={test:function(n){return!0}}}();var e,i,o;!function(){function n(n,t){for(var r in n)if(t.test(r))return!0;return!1}e=function(n,r,e){for(var i=b(n),u=r.length,a=-1;++a<u;){var s=r[a];if(o(i,s,e))return s.current=t(s,n),s}return null},i=function(n,r,e){for(var i=b(n),u=r.length,a=-1,s=[];++a<u;){var l=r[a];o(i,l,e)&&(l.current=t(l,n),s.push(l))}return s},o=function(t,r,e){if(null!=e&&null!=r.method&&r.method!==e)return!1;if(r.match)return r.match.test("string"==typeof t?t:m(t));if("string"==typeof t&&(t=b(t)),r.query){var i,u,o=t.query;if(null==o)return!1;for(i in r.query){u=r.query[i];var a=i[0];if(":"!==a){if("?"!==a)if("string"!=typeof u){if(u.test&&!u.test(o[i]))return!1}else{if(null==o[i])return!1;if(u&&o[i]!==u)return!1}}else{var s=y(i);if(null==s||n(o,s.matcher)===!1)return!1}}}var l=r.path,c=l.length;if(0===c)return r.strict?0===t.path.length:!0;for(var f,h=t.path,v=0,p=h.length;p>v;v++){if(f=l[v],v>=c)return r.strict!==!0;if("string"==typeof f){if(h[v]===f)continue;return!1}if(f.matcher){if(f.matcher.test(h[v])===!1)return!1}else{if(f.optional)return!0;if(!f.alias)return!1}}return c>v?l[v].optional===!0:!0}}();var s=function h(t,e){r(this,h),this.method=null;var i=t;if(36===i.charCodeAt(0)){var o=i.indexOf(" ");this.method=i.substring(1,o).toUpperCase(),i=i.substring(o+1)}this.value=e,this.strict=u,this.definition=t,this.current=null,this.query=null,this.path=null,n(this,i)},c=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),r=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function u(){r(this,u),this.routes=[]}return c(u,{add:{value:function(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return this.push.apply(this,t)}},push:{value:function(n,t){var r=new s(n,t);return this.routes.push(r),this}},unshift:{value:function(n,t){var r=new s(n,t);return this.routes.unshift(r),this}},remove:{value:function(n,t){for(var r=this.routes.length,e=-1;++e<r;){var i=this.routes[e];null!=n&&i.definition===n&&null!=t&&i.value===t&&(this.routes.splice(e,1),e--)}}},get:{value:function(n,t){return e(n,this.routes,t)}},getAll:{value:function(n,t){return i(n,this.routes,t)}},clear:{value:function(){return this.routes.length=0,this}}},{parse:{value:function(r,e){var i={};return n(i,r),t(i,e)}}}),u}();x=f}();var C;!function(){"undefined"==typeof window&&(C=function(){});var n=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),t=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function r(n){t(this,r),this.listener=n,window.onhashchange=this.onhashchange.bind(this)}return n(r,{onhashchange:{value:function(){this.changed(location.hash)}},navigate:{value:function(n){return null==n?void this.changed(location.hash):void(location.hash=n)}},changed:{value:function(n){this.listener.changed(r.normalizeHash(n))}},current:{value:function(){return r.normalizeHash(location.hash)}}},{supports:{value:function(){return"undefined"!=typeof window&&"onhashchange"in window!=!1}},normalizeHash:{value:function(n){return n.replace(/^[!#\/]+/,"/")}}}),r}(),n=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),t=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(n){t(this,e),this.listener=n,this.initial=location.href,window.onpopstate=this.onpopstate.bind(this)}return n(e,{onpopstate:{value:function(){return this.initial===location.href?void(this.initial=null):void this.changed()}},navigate:{value:function(n,t){if(null==n)return void this.changed();var e="object"==typeof n,i=null;if(null!=t&&t.extend===!0){var u=e?n:h(n),o=h(location.search);if(null!=o&&null!=u){for(var a in o)void 0!==u[a]&&null===u[a]&&delete o[a];u=r(o,u),i=v(i||"",u)}}null==i&&(i=e?v("",n):n),history.pushState({},null,i),this.initial=null,this.changed()}},changed:{value:function(){this.listener.changed(location.pathname+location.search)}},current:{value:function(){return location.pathname+location.search}}},{supports:{value:function(){return"undefined"==typeof window?!1:window.history&&window.history.pushState?window.location.href===document.baseURI:!1}}}),e}(),n=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),t=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function r(n,u){if(t(this,r),this.collection=n||new x,this.listeners=new x,u){var o="hash"===u?e:i;this.emitter=new o(this)}null==this.emitter&&i.supports()&&(this.emitter=new i(this)),null==this.emitter&&e.supports()&&(this.emitter=new e(this)),null==this.emitter&&a("Router can not be initialized - (nor HistoryAPI / nor hashchange")}return n(r,{changed:{value:function(n){var t=this.collection.get(n);t&&this.action(t);for(var r=this.listeners.getAll(n),e=r.length,i=-1;++i<e;)r[i].value(r[i])}},action:{value:function(n){if("function"==typeof n.value){var t=n.current;n.value(n,t&&t.params)}}},navigate:{value:function(n,t){this.emitter.navigate(n,t)}},current:{value:function(){return this.collection.get(this.currentPath())}},currentPath:{value:function(){return this.emitter.current()}},on:{value:function(n,t){this.listeners.push(n,t)}},off:{value:function(n,t){this.listeners.remove(n,t)}}}),r}();C=u}();var O,R={pathFromCLI:f,query:{serialize:g,deserialize:p,get:function(n){var t=null==n?location.search:n;return h(t)}}},q=new x,A={Collection:x,setRouterType:function(n){return null==O&&(O=new C(q,n)),this},setStrictBehaviour:function(n){return u=n,this},add:function(n,r){return t(),q.add(n,r),this},on:function(n,r){return t().on(n,r),this},off:function(n,r){return t().off(n,r),this},get:function(n){return q.get(n)},navigate:function(n,r){return t().navigate(n,r),this},current:function(){return t().current()},currentPath:function(){return t().currentPath()},notifyCurrent:function(){return t().navigate(),this},parse:x.parse,$utils:R,_:R};return function(){function n(n){n.preventDefault(),n.stopPropagation(),A.navigate(this.getAttribute("href"))}null!=i&&i.registerAttrHandler("x-dynamic",function(t,r,e,i,u){u.onclick=n},"client")}(),A});
//# sourceMappingURL=ruta.min.js.map