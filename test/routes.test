var routes = new ruta.Collection();

UTest({
	'add+get': function(){
		
		routes
			.clear()
			.add('/note/:id/:action(edit|delete)', { foo: 'bar' });

		var got = routes.get('/note/524d66bccc0ac4d8913eaea5/edit?x=y');

		eq(got.value.foo, 'bar');
		eq(got.current.params.id, '524d66bccc0ac4d8913eaea5');
		eq(got.current.params.action, 'edit');
		eq(got.current.params.x, 'y');
		
		
		routes
			.clear()
			.add('/install/:name?:global(glob|g)', { foo: 'bar' });
			
		var got = routes.get('/install/loader?glob=baz');
		
		notEq(got, null);
		eq(got.current.params.global, 'baz');
		
		
		routes
			.clear()
			.add('/install/:name??:global(glob|g)', { foo: 'bar' });
		var got = routes.get('/install/loader?qux=baz');
		
		notEq(got, null);
		eq(got.current.params.qux, 'baz');
		eq(got.current.params.global, null);
		
		routes
			.clear()
			.add('/install/:name??:global(glob|g)', { foo: 'bar' });
			
		var got = routes.get('/install/loader?qux=baz&g=foo');
		
		notEq(got, null);
		eq(got.current.params.qux, 'baz');
		eq(got.current.params.global, 'foo');
	},
	
	
})
