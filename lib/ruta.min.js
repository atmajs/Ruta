(function(n,t){"use strict";null==n&&(n="undefined"!=typeof window&&"undefined"!=typeof document?window:global),n.ruta=t(n)})(this,function(n){"use strict";function t(n){for(var t=n.length,i=0,e=t-1;t>i&&"/"===n[i];i++);for(;e>i&&"/"===n[e];e--);return n.substring(i,e+1)}function i(n){return n=t(n),""===n?[]:n.split("/")}function e(n,t){null==t&&(t="/");for(var i,e={},r=n.split(t),o=0,u=r.length;u>o;o++)i=r[o].split("="),e[i[0]]=decodeURIComponent(i[1]);return e}function r(){return null==o&&(o=new c(s)),o}var o,u=n.mask||Mask,a=function(){function n(n,t){"!"===t[0]&&(n.strict=!0,t=t.substring(1));for(var i,e,r,o,u,a,c=t.split("/"),l=0,f=c.length,h="",p=null,d=0,g=!0,v=[];f>l;l++)i=c[l],""!==i&&(e=i.charCodeAt(0),o=i.charCodeAt(1),u=63===e,a=58===(u?o:e),r=0,u&&r++,a&&r++,0!==r&&(i=i.substring(r)),!u&&!g&&console.log("Strict route part found after conditional",t),u&&(g=!1),g&&(d+=1,h+="/"+(a?s:i)),a&&((p||(p={}))[r]=i),u||a?a&&v.push({alias:i,optional:u}):v.push(i));n.parts=v}function r(n,t){var r=t.indexOf("?"),o=-1===r?null:t.substring(r+1),u={path:t,params:null==o?{}:e(o,"&")};-1!==r&&(t=t.substring(0,r));for(var a,c,s=i(t),l=n.parts,f=l.length,h=s.length,p=0;h>p;p++)if(a=s[p],c=f>p?l[p]:null){if("string"==typeof c)continue;if(c.alias){u.params[c.alias]=a;continue}}return u}function o(n,e){n=t(n);for(var o,a=n.indexOf("?"),c=-1===a?n:n.substring(0,a),s=i(c),l=0,f=e.length;f>l;l++)if(o=e[l],u(s,o))return o.current=r(o,n),o;return null}function u(n,t){"string"==typeof n&&(n=i(n));for(var e,r=t.parts,o=r.length,u=0,a=n.length;a>u;u++){if(e=r[u],u>=o)return t.strict!==!0;if("string"==typeof e){if(n[u]===e)continue;return!1}if(e.optional)return!0;if(!e.alias)return!1}return o>u?r[u].optional===!0:!0}function a(t,i){this.value=i,this.definition=t,n(this,t)}function c(){this.routes=[]}var s="([^\\\\]+)";return a.prototype={parts:null,value:null,current:null},c.prototype={add:function(n,t){return this.routes.push(new a(n,t)),this},get:function(n){return o(n,this.routes)}},c.parse=function(t,i){var e={};return n(e,t),r(e,i)},c}(),c=function(){function n(n){if("undefined"==typeof window||"onhashchange"in window==!1)return null;var t=this;return t.listener=n,window.onhashchange=function(){t.changed(location.hash)},t}function t(n){if("undefined"==typeof window)return null;if(!window.history||!window.history.pushState)return null;var t=this;return t.listener=n,t.initial=location.pathname,window.onpopstate=function(){return t.initial===location.pathname?(t.initial=null,void 0):(t.changed(),void 0)},t}function i(i,e){this.collection=i||new a,this.emitter=new t(this),e&&(this.action=e),null==this.emitter&&(this.emitter=new n(this)),null==this.emitter&&console.error("Router can not be initialized - (nor History API / nor Hashchage")}return"undefined"==typeof window?function(){}:(function(){function t(n){return n.replace(/^[!#/]+/,"/")}n.prototype={navigate:function(n){location.hash=n},changed:function(n){this.listener.changed(t(n))},current:function(){return t(location.hash)}}}(),function(){t.prototype={navigate:function(n){history.pushState({},null,n),this.changed()},changed:function(){this.listener.changed(location.pathname+location.search)}}}(),i.prototype={changed:function(n){var t=this.collection.get(n);t&&this.action(t)},action:function(n){n.value(n)},navigate:function(n){this.emitter.navigate(n)},current:function(){var n=this.emitter.current();return this.collection.get(n)}},i)}(),s=new a,l={Collection:a,add:function(n,t){return r(),s.add(n,t)},get:function(n){return s.get(n)},navigate:function(n){r().navigate(n)},current:function(){return r().current()},parse:a.parse};return function(){function n(n){n.preventDefault(),n.stopPropagation(),l.navigate(this.href)}u.registerAttrHandler("x-dynamic",function(t,i,e,r,o){o.onclick=n},"client")}(),l});